<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImmutableType Article Card</title>
    <style>
        /* Import fonts from your global.css */
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&family=Spectral:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');

        :root {
            /* Primary Colors */
            --color-black: #000000;
            --color-white: #FFFFFF;
            --color-typewriter-red: #B3211E;
            
            /* Secondary Colors */
            --color-blockchain-blue: #2B3990;
            --color-digital-silver: #D9D9D9;
            --color-parchment: #F4F1E8;
            
            /* Accent Colors */
            --color-verification-green: #1D7F6E;
            --color-alert-amber: #E8A317;
            
            /* Typography */
            --font-headlines: 'Special Elite', 'Courier New', monospace;
            --font-body: 'Spectral', Georgia, serif;
            --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            font-family: var(--font-body);
            background-color: #f5f5f5;
            padding: 20px;
            color: var(--color-black);
        }

        /* Container styles */
        .article-container {
            display: flex;
            max-width: 900px;
            margin: 0 auto 30px auto;
            background-color: var(--color-white);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid var(--color-digital-silver);
        }

        /* Left pane styles */
        .content-pane {
            flex: 2;
            padding: 24px;
            border-right: 1px solid var(--color-digital-silver);
            position: relative;
        }

        .content-pane img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 16px;
            background-color: var(--color-digital-silver);
        }

        .content-pane h2 {
            font-family: var(--font-headlines);
            font-size: 24px;
            margin: 0 0 12px 0;
            line-height: 1.2;
        }

        .content-pane p {
            margin: 0 0 16px 0;
            line-height: 1.6;
            color: #333;
        }

        .content-actions {
            position: absolute;
            top: 24px;
            right: 24px;
            display: flex;
            gap: 8px;
        }

        .action-icon {
            width: 32px;
            height: 32px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        .action-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .bookmark-icon {
            color: var(--color-blockchain-blue);
        }

        .link-icon {
            color: var(--color-blockchain-blue);
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 10;
        }

        .metadata {
            display: flex;
            flex-wrap: wrap;
            font-family: var(--font-ui);
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            align-items: center;
        }

        .metadata span {
            margin-right: 16px;
            margin-bottom: 4px;
        }

        .location-tag {
            display: inline-flex;
            align-items: center;
            color: var(--color-blockchain-blue);
            font-weight: 500;
        }

        .location-tag svg {
            margin-right: 4px;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin-right: 8px;
        }

        .proposal-badge {
            background-color: var(--color-blockchain-blue);
            color: white;
        }

        .verification-badge {
            background-color: var(--color-verification-green);
            color: white;
        }

        /* Right pane styles */
        .engagement-pane {
            flex: 1;
            padding: 24px;
            background-color: var(--color-parchment);
            display: flex;
            flex-direction: column;
        }

        .section-title {
            font-family: var(--font-ui);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            margin: 0 0 16px 0;
            color: #555;
            display: flex;
            align-items: center;
        }

        .section-title svg {
            margin-right: 6px;
        }

        .emoji-reactions {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        .emoji-button {
            background-color: var(--color-white);
            border: 1px solid var(--color-digital-silver);
            border-radius: 20px;
            padding: 8px 12px;
            margin: 0 8px 8px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-family: var(--font-ui);
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .emoji-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .emoji-button span {
            font-size: 16px;
            margin-right: 6px;
        }

        .emoji-button.active {
            background-color: #f0f0f0;
            border-color: var(--color-blockchain-blue);
        }

        .emoji-button .power-up {
            position: absolute;
            bottom: -30px;
            left: 0;
            width: 100%;
            background-color: var(--color-blockchain-blue);
            color: white;
            text-align: center;
            padding: 4px 0;
            transition: bottom 0.3s;
            font-size: 12px;
        }

        .emoji-button.long-press .power-up {
            bottom: 0;
        }

        .emoji-counter {
            font-size: 13px;
            color: #666;
            margin: 0 0 24px 0;
        }

        .funding-status {
            margin-bottom: 24px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--color-digital-silver);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--color-verification-green);
            width: 75%; /* Mock value */
        }

        .attribution {
            margin-top: auto;
            font-family: var(--font-ui);
        }

        .attribution-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .attribution-label {
            color: #777;
        }

        .attribution-value {
            font-weight: 500;
            color: #333;
        }

        .author-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
            margin-bottom: 16px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            font-size: 12px;
            background-color: rgba(0, 0, 0, 0.05);
            padding: 4px 8px;
            border-radius: 12px;
        }

        .stat-item svg {
            margin-right: 4px;
            font-size: 14px;
        }

        .emoji-earnings {
            background-color: white;
            border-radius: 6px;
            padding: 12px;
            margin-top: 16px;
        }

        .earnings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 10px;
        }

        .earnings-entity {
            text-align: center;
        }

        .earnings-amount {
            font-weight: 600;
            color: var(--color-verification-green);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .earnings-amount span {
            margin-right: 4px;
        }

        .earnings-label {
            font-size: 12px;
            margin-top: 4px;
        }

        .cta-button {
            background-color: var(--color-blockchain-blue);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-family: var(--font-ui);
            font-weight: 500;
            cursor: pointer;
            margin-top: 16px;
            transition: background-color 0.2s;
            text-align: center;
            width: 100%;
        }

        .cta-button:hover {
            background-color: #1a2770;
        }

        /* Types of cards */
        .proposal-card .engagement-pane {
            background-color: rgba(43, 57, 144, 0.05);
        }

        /* Community card with gradient background based on score */
        .community-card .engagement-pane {
            background: linear-gradient(to bottom, rgba(29, 127, 110, 0.1), rgba(29, 127, 110, 0.05));
        }

        .community-card.medium-score .engagement-pane {
            background: linear-gradient(to bottom, rgba(232, 163, 23, 0.1), rgba(232, 163, 23, 0.05));
        }

        .community-card.low-score .engagement-pane {
            background: linear-gradient(to bottom, rgba(179, 33, 30, 0.1), rgba(179, 33, 30, 0.05));
        }

        /* Vote buttons for community content */
        .vote-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .vote-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: var(--font-ui);
            font-weight: 500;
            border: 1px solid var(--color-digital-silver);
            flex: 1;
        }

        .upvote {
            background-color: rgba(29, 127, 110, 0.1);
            color: var(--color-verification-green);
        }

        .downvote {
            background-color: rgba(179, 33, 30, 0.1);
            color: var(--color-typewriter-red);
        }

        .ratio-display {
            font-size: 13px;
            margin-top: 8px;
            margin-bottom: 16px;
            color: #666;
            text-align: center;
        }

        /* Animation for emoji clicks */
        @keyframes emoji-burst {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.7;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        .emoji-animation {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            font-size: 16px;
            animation: emoji-burst 0.5s forwards;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .article-container {
                flex-direction: column;
            }

            .content-pane {
                border-right: none;
                border-bottom: 1px solid var(--color-digital-silver);
            }

            .content-actions {
                top: 16px;
                right: 16px;
            }

            .emoji-reactions {
                justify-content: center;
            }

            .vote-buttons {
                flex-direction: column;
            }
        }

        /* Link dialog */
        .link-dialog {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .link-dialog-content {
            background-color: white;
            padding: 24px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .link-dialog h3 {
            margin-top: 0;
            font-family: var(--font-headlines);
        }

        .link-group {
            margin-bottom: 16px;
        }

        .link-label {
            font-family: var(--font-ui);
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 4px;
        }

        .link-value {
            display: flex;
            align-items: center;
            background-color: #f5f5f5;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .copy-button {
            margin-left: 8px;
            background-color: var(--color-blockchain-blue);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .close-button {
            background-color: #f5f5f5;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-family: var(--font-ui);
            margin-top: 16px;
        }
    </style>
</head>
<body>
    <h1 style="font-family: var(--font-headlines); text-align: center; margin-bottom: 30px;">ImmutableType Engagement System</h1>
    
    <!-- Regular Article Card -->
    <div class="article-container">
        <div class="content-pane">
            <div class="content-actions">
                <div class="action-icon bookmark-icon tooltip" data-tooltip="Bookmark (Free for subscribers)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                    </svg>
                </div>
                <div class="action-icon link-icon tooltip" data-tooltip="Copy Link" onclick="showLinkDialog('article1')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
                        <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
                    </svg>
                </div>
            </div>
            <img src="https://images.unsplash.com/photo-1616763355548-1b606f439f86?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Miami skyline">
            <h2>Miami Announces New Climate Resilience Initiative</h2>
            <p>The city of Miami unveiled a comprehensive climate resilience plan today, addressing sea level rise with innovative infrastructure projects and community preparedness measures...</p>
            <div class="metadata">
                <span>May 2, 2025</span>
                <span>Local News</span>
                <span class="location-tag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    #Miami
                </span>
                <span class="badge verification-badge">Verified</span>
            </div>
        </div>
        <div class="engagement-pane">
            <div>
                <h3 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M6.59 1.44l.94-1.32a1 1 0 0 1 1.65 0l.94 1.32a1 1 0 0 0 .9.56h1.38a1 1 0 0 1 .9 1.47l-.5 1.03a1 1 0 0 0 .12 1.04l.91 1.15a1 1 0 0 1-.35 1.56l-1.07.7a1 1 0 0 0-.5.84v1.34a1 1 0 0 1-1.09 1.14l-1.22-.12a1 1 0 0 0-.89.37l-.91 1.01a1 1 0 0 1-1.56.04l-.75-1.13a1 1 0 0 0-.92-.42l-1.35.09a1 1 0 0 1-1.15-1.08l.03-1.32a1 1 0 0 0-.5-.84l-1.1-.67a1 1 0 0 1-.34-1.57l.93-1.14a1 1 0 0 0 .13-1.04l-.52-1.03a1 1 0 0 1 .87-1.47h1.44a1 1 0 0 0 .9-.56l.94-1.32z"/>
                    </svg>
                    Chain Reactions
                </h3>
                <div class="emoji-reactions">
                    <button class="emoji-button" data-emoji="üëç">
                        <span>üëç</span> 42
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="üëè">
                        <span>üëè</span> 28
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="üî•">
                        <span>üî•</span> 15
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="ü§î">
                        <span>ü§î</span> 7
                        <div class="power-up">+100</div>
                    </button>
                </div>
                <div class="emoji-counter">92 verified unique supporters</div>
            </div>
            
            <div class="emoji-earnings">
                <h3 class="section-title">Emojis Earned</h3>
                <div class="earnings-grid">
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üëë</span> 45</div>
                        <div class="earnings-label">Author</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üèõÔ∏è</span> 25</div>
                        <div class="earnings-label">Platform</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üí°</span> 30</div>
                        <div class="earnings-label">Proposer</div>
                    </div>
                </div>
            </div>
            
            <div class="attribution">
                <div class="attribution-item">
                    <span class="attribution-label">Author:</span>
                    <span class="attribution-value">Sarah Martinez</span>
                </div>
                <div class="author-stats">
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                            <path d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                        </svg>
                        42 Written
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2zM3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
                            <path d="M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.945 11.945 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0z"/>
                        </svg>
                        12 Proposed
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                        </svg>
                        Miami, FL
                    </div>
                </div>
                <div class="attribution-item">
                    <span class="attribution-label">Proposed by:</span>
                    <span class="attribution-value">MiamiWatch</span>
                </div>
                <div class="attribution-item">
                    <span class="attribution-label">Content hash:</span>
                    <span class="attribution-value">QmT8...</span>
                </div>
                <button class="cta-button">Reload My Emojis</button>
            </div>
        </div>
    </div>
    
    <!-- Proposal Card -->
    <div class="article-container proposal-card">
        <div class="content-pane">
            <div class="content-actions">
                <div class="action-icon bookmark-icon tooltip" data-tooltip="Bookmark (Free for subscribers)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                    </svg>
                </div>
                <div class="action-icon link-icon tooltip" data-tooltip="Copy Link" onclick="showLinkDialog('proposal1')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
                        <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
                    </svg>
                </div>
            </div>
            <img src="https://images.unsplash.com/photo-1595756471015-9c1676c5b636?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Miami Beach">
            <h2>Proposal: Investigation into Beach Erosion Solutions</h2>
            <p>This investigation will explore cutting-edge solutions to beach erosion affecting Miami's coastline, including interviews with environmental experts and analysis of successful models from other coastal cities...</p>
            <div class="metadata">
                <span>Proposed: April 28, 2025</span>
                <span>Environmental</span>
                <span class="location-tag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    #Miami
                </span>
                <span class="badge proposal-badge">Open Proposal</span>
            </div>
        </div>
        <div class="engagement-pane">
            <div>
                <h3 class="section-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M6.59 1.44l.94-1.32a1 1 0 0 1 1.65 0l.94 1.32a1 1 0 0 0 .9.56h1.38a1 1 0 0 1 .9 1.47l-.5 1.03a1 1 0 0 0 .12 1.04l.91 1.15a1 1 0 0 1-.35 1.56l-1.07.7a1 1 0 0 0-.5.84v1.34a1 1 0 0 1-1.09 1.14l-1.22-.12a1 1 0 0 0-.89.37l-.91 1.01a1 1 0 0 1-1.56.04l-.75-1.13a1 1 0 0 0-.92-.42l-1.35.09a1 1 0 0 1-1.15-1.08l.03-1.32a1 1 0 0 0-.5-.84l-1.1-.67a1 1 0 0 1-.34-1.57l.93-1.14a1 1 0 0 0 .13-1.04l-.52-1.03a1 1 0 0 1 .87-1.47h1.44a1 1 0 0 0 .9-.56l.94-1.32z"/>
                    </svg>
                    Chain Reactions
                </h3>
                <div class="emoji-reactions">
                    <button class="emoji-button" data-emoji="üëç">
                        <span>üëç</span> 38
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="üëè">
                        <span>üëè</span> 12
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="üî•">
                        <span>üî•</span> 9
                        <div class="power-up">+100</div>
                    </button>
                    <button class="emoji-button" data-emoji="ü§î">
                        <span>ü§î</span> 22
                        <div class="power-up">+100</div>
                    </button>
                </div>
                <div class="emoji-counter">81 verified unique supporters</div>
            </div>
            
            <div class="funding-status">
                <h3 class="section-title">Funding Status</h3>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 13px; font-family: var(--font-ui);">
                    <span>750 CR raised</span>
                    <span>1000 CR goal</span>
                </div>
            </div>
            
            <div class="emoji-earnings">
                <h3 class="section-title">Emojis Earned</h3>
                <div class="earnings-grid">
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üí°</span> 60</div>
                        <div class="earnings-label">Proposer</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üèõÔ∏è</span> 40</div>
                        <div class="earnings-label">Platform</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>‚è≥</span> 0</div>
                        <div class="earnings-label">Future Author</div>
                    </div>
                </div>
            </div>
            
            <div class="attribution">
                <div class="attribution-item">
                    <span class="attribution-label">Proposed by:</span>
                    <span class="attribution-value">OceanGuardian</span>
                </div>
                <div class="author-stats">
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                            <path d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                        </svg>
                        5 Written
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2zM3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
                            <path d="M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.945 11.945 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0z"/>
                        </svg>
                        28 Proposed
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                        </svg>
                        Miami, FL
                    </div>
                </div>
                <div class="attribution-item">
                    <span class="attribution-label">Journalist interest:</span>
                    <span class="attribution-value">3 interested</span>
                </div>
                <button class="cta-button">Fund This Proposal</button>
            </div>
        </div>
    </div>
    
    <!-- Community Curated Content Card -->
    <div class="article-container community-card">
        <div class="content-pane">
            <div class="content-actions">
                <div class="action-icon bookmark-icon tooltip" data-tooltip="Bookmark (Free for subscribers)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                    </svg>
                </div>
                <div class="action-icon link-icon tooltip" data-tooltip="Copy Link" onclick="showLinkDialog('curated1')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>
                        <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/>
                    </svg>
                </div>
            </div>
            <img src="https://images.unsplash.com/photo-1533106418989-88406c7cc8ca?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="Miami Art District">
            <h2>Miami Art Week Dates Announced for 2025</h2>
            <p>The annual Miami Art Week will return December 1-6, 2025, featuring expanded programming and new venues throughout the city's growing arts districts...</p>
            <div class="metadata">
                <span>Shared: May 4, 2025</span>
                <span>Arts & Culture</span>
                <span class="location-tag">
                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    #Miami
                </span>
                <span class="badge" style="background-color: var(--color-alert-amber); color: white;">Community Curated</span>
            </div>
        </div>
        <div class="engagement-pane">
            <div>
                <h3 class="section-title">Community Votes</h3>
                <div class="vote-buttons">
                    <button class="vote-button upvote" data-vote="up">
                        <span>‚¨ÜÔ∏è</span> Upvote (87)
                    </button>
                    <button class="vote-button downvote" data-vote="down">
                        <span>‚¨áÔ∏è</span> Downvote (12)
                    </button>
                </div>
                <div class="ratio-display">88% positive community rating</div>
            </div>
            
            <div class="emoji-earnings">
                <h3 class="section-title">Emojis Earned</h3>
                <div class="earnings-grid">
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üîç</span> 70</div>
                        <div class="earnings-label">Submitter</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>üèõÔ∏è</span> 30</div>
                        <div class="earnings-label">Platform</div>
                    </div>
                    <div class="earnings-entity">
                        <div class="earnings-amount"><span>‚ö°</span> 100</div>
                        <div class="earnings-label">Total</div>
                    </div>
                </div>
            </div>
            
            <div class="attribution">
                <div class="attribution-item">
                    <span class="attribution-label">Source:</span>
                    <span class="attribution-value">miamiartguide.com</span>
                </div>
                <div class="attribution-item">
                    <span class="attribution-label">Submitted by:</span>
                    <span class="attribution-value">ArtLover305</span>
                </div>
                <div class="author-stats">
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"/>
                        </svg>
                        45 Curated
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                        </svg>
                        90% Reliable
                    </div>
                    <div class="stat-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                        </svg>
                        Miami, FL
                    </div>
                </div>
                <button class="cta-button">Visit Original Article</button>
            </div>
        </div>
    </div>

    <!-- Link Dialog -->
    <div class="link-dialog" id="linkDialog">
        <div class="link-dialog-content">
            <h3>Share this content</h3>
            <div class="link-group">
                <div class="link-label">Web URL</div>
                <div class="link-value">
                    <span id="webUrl">https://immutabletype.com/miami/article/miami-announces-climate-resilience</span>
                    <button class="copy-button" onclick="copyToClipboard('webUrl')">Copy</button>
                </div>
            </div>
            <div class="link-group">
                <div class="link-label">Blockchain Hash</div>
                <div class="link-value">
                    <span id="blockchainHash">QmT8Z9FMn5uWmDPJBnkKtL93Q8pXewTZR6Lyx7GBN7JMuN</span>
                    <button class="copy-button" onclick="copyToClipboard('blockchainHash')">Copy</button>
                </div>
            </div>
            <button class="close-button" onclick="hideLinkDialog()">Close</button>
        </div>
    </div>

    <script>
        // Variables to store timeout for long press
        let longPressTimer;
        const longPressDelay = 500; // ms

        // Set up emoji button events
        document.querySelectorAll('.emoji-button').forEach(button => {
            // Mouse events for desktop
            button.addEventListener('mousedown', function() {
                const emoji = this.dataset.emoji;
                longPressTimer = setTimeout(() => {
                    this.classList.add('long-press');
                }, longPressDelay);
            });

            button.addEventListener('mouseup', function() {
                clearTimeout(longPressTimer);
                if (this.classList.contains('long-press')) {
                    // Handle +100 action
                    const emoji = this.dataset.emoji;
                    const text = this.textContent;
                    const countMatch = text.match(/\d+/);
                    const count = parseInt(countMatch[0]);
                    this.textContent = `${emoji} ${count + 100}`;
                    createEmojiAnimation(this, this.dataset.emoji, 100);
                    this.classList.remove('long-press');
                } else {
                    // Handle normal click
                    const text = this.textContent;
                    const countMatch = text.match(/\d+/);
                    const count = parseInt(countMatch[0]);
                    const emoji = this.dataset.emoji;
                    
                    this.textContent = `${emoji} ${count + 1}`;
                    createEmojiAnimation(this, this.dataset.emoji, 1);
                }
            });

            button.addEventListener('mouseleave', function() {
                clearTimeout(longPressTimer);
                this.classList.remove('long-press');
            });

            // Touch events for mobile
            button.addEventListener('touchstart', function(e) {
                const emoji = this.dataset.emoji;
                longPressTimer = setTimeout(() => {
                    this.classList.add('long-press');
                }, longPressDelay);
            });

            button.addEventListener('touchend', function(e) {
                clearTimeout(longPressTimer);
                if (this.classList.contains('long-press')) {
                    // Handle +100 action
                    const emoji = this.dataset.emoji;
                    const text = this.textContent;
                    const countMatch = text.match(/\d+/);
                    const count = parseInt(countMatch[0]);
                    this.textContent = `${emoji} ${count + 100}`;
                    createEmojiAnimation(this, this.dataset.emoji, 100);
                    this.classList.remove('long-press');
                } else {
                    // Handle normal tap
                    const text = this.textContent;
                    const countMatch = text.match(/\d+/);
                    const count = parseInt(countMatch[0]);
                    const emoji = this.dataset.emoji;
                    
                    this.textContent = `${emoji} ${count + 1}`;
                    createEmojiAnimation(this, this.dataset.emoji, 1);
                }
                e.preventDefault(); // Prevent default behavior
            });

            button.addEventListener('touchcancel', function() {
                clearTimeout(longPressTimer);
                this.classList.remove('long-press');
            });
        });

        // Create emoji animation effect
        function createEmojiAnimation(button, emoji, count) {
            const numEmojis = count === 100 ? 10 : 1; // More emojis for +100
            
            for (let i = 0; i < numEmojis; i++) {
                const emojiElement = document.createElement('div');
                emojiElement.className = 'emoji-animation';
                emojiElement.textContent = emoji;
                
                // Random position for multiple emojis
                const randomX = Math.random() * 40 - 20; // -20px to +20px
                const randomY = Math.random() * 40 - 20; // -20px to +20px
                
                emojiElement.style.left = `calc(50% + ${randomX}px)`;
                emojiElement.style.top = `calc(50% + ${randomY}px)`;
                
                button.appendChild(emojiElement);
                
                // Remove the emoji element after animation completes
                setTimeout(() => {
                    emojiElement.remove();
                }, 500);
            }
        }

        // Handle vote buttons
        document.querySelectorAll('.vote-button').forEach(button => {
            button.addEventListener('click', function() {
                const isUpvote = this.classList.contains('upvote');
                const countMatch = this.textContent.match(/\((\d+)\)/);
                const currentCount = parseInt(countMatch[1]);
                
                // Update the button text
                const label = isUpvote ? "Upvote" : "Downvote";
                const icon = isUpvote ? "‚¨ÜÔ∏è" : "‚¨áÔ∏è";
                this.textContent = `${icon} ${label} (${currentCount + 1})`;
                
                // Update the ratio display
                const container = this.closest('.article-container');
                const ratioDisplay = container.querySelector('.ratio-display');
                const upvoteBtn = container.querySelector('.upvote');
                const downvoteBtn = container.querySelector('.downvote');
                
                const upvotes = parseInt(upvoteBtn.textContent.match(/\((\d+)\)/)[1]);
                const downvotes = parseInt(downvoteBtn.textContent.match(/\((\d+)\)/)[1]);
                const percentage = Math.round((upvotes / (upvotes + downvotes)) * 100);
                
                ratioDisplay.textContent = `${percentage}% positive community rating`;
                
                // Update card class based on new rating
                container.classList.remove('high-score', 'medium-score', 'low-score');
                if (percentage >= 85) {
                    container.classList.add('high-score');
                } else if (percentage >= 60) {
                    container.classList.add('medium-score');
                } else {
                    container.classList.add('low-score');
                }
            });
        });

        // Link dialog functions
        function showLinkDialog(contentId) {
            const dialog = document.getElementById('linkDialog');
            dialog.style.display = 'flex';
            
            // Set the appropriate links based on content ID
            let webUrl, blockchainHash;
            
            switch(contentId) {
                case 'article1':
                    webUrl = 'https://immutabletype.com/miami/article/miami-announces-climate-resilience';
                    blockchainHash = 'QmT8Z9FMn5uWmDPJBnkKtL93Q8pXewTZR6Lyx7GBN7JMuN';
                    break;
                case 'proposal1':
                    webUrl = 'https://immutabletype.com/miami/proposal/beach-erosion-solutions';
                    blockchainHash = 'QmYZ7FMn5uWmDPJBnkKtL93Q8pXewTZR6Lyx7GBN7HFdG';
                    break;
                case 'curated1':
                    webUrl = 'https://immutabletype.com/miami/curated/miami-art-week-dates-2025';
                    blockchainHash = 'QmA95FMn5uWmDPJBnkKtL93Q8pXewTZR6Lyx7GBN7KLmn';
                    break;
                default:
                    webUrl = 'https://immutabletype.com/content/' + contentId;
                    blockchainHash = 'QmUnknown';
            }
            
            document.getElementById('webUrl').textContent = webUrl;
            document.getElementById('blockchainHash').textContent = blockchainHash;
        }

        function hideLinkDialog() {
            const dialog = document.getElementById('linkDialog');
            dialog.style.display = 'none';
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                // Show a brief "Copied!" message
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = "Copied!";
                setTimeout(() => {
                    button.textContent = originalText;
                }, 1500);
            });
        }

        // Close dialog when clicking outside content
        document.getElementById('linkDialog').addEventListener('click', function(e) {
            if (e.target === this) {
                hideLinkDialog();
            }
        });

        // Initialize community card gradient based on score
        document.querySelectorAll('.community-card').forEach(card => {
            const ratioText = card.querySelector('.ratio-display').textContent;
            const percentage = parseInt(ratioText.match(/(\d+)%/)[1]);
            
            card.classList.remove('high-score', 'medium-score', 'low-score');
            if (percentage >= 85) {
                card.classList.add('high-score');
            } else if (percentage >= 60) {
                card.classList.add('medium-score');
            } else {
                card.classList.add('low-score');
            }
        });
    </script>
</body>
</html>
