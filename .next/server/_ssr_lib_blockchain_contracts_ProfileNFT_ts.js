"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_blockchain_contracts_ProfileNFT_ts";
exports.ids = ["_ssr_lib_blockchain_contracts_ProfileNFT_ts"];
exports.modules = {

/***/ "(ssr)/./deployments/ProfileNFT.json":
/*!*************************************!*\
  !*** ./deployments/ProfileNFT.json ***!
  \*************************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"contractName":"ProfileNFT","address":"0x0c4141ec0d87fA1B7820E5AF277024251d392F05","network":"flowTestnet","deployer":"0x9402F9f20b4a27b55B1cC6cf015D98f764814fb2","deployedAt":"2025-05-28T18:26:58.229Z","membershipTokenAddress":"0xC90bE82B23Dca9453445b69fB22D5A90402654b2","publisherCredentialsAddress":"0x8b351Bc93799898a201E796405dBC30Aad49Ee21"}');

/***/ }),

/***/ "(ssr)/./lib/blockchain/contracts/ProfileNFT.abi.json":
/*!******************************************************!*\
  !*** ./lib/blockchain/contracts/ProfileNFT.abi.json ***!
  \******************************************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"profileId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"membershipTokenId","type":"uint256"},{"indexed":false,"internalType":"string","name":"displayName","type":"string"}],"name":"ProfileMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"profileId","type":"uint256"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"ProfileTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"profileId","type":"uint256"},{"indexed":false,"internalType":"string[]","name":"fieldsUpdated","type":"string[]"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"ProfileUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MEMBERSHIP_TOKEN","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PUBLISHER_CREDENTIALS","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"addressToProfileId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"}],"name":"getProfile","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"membershipTokenId","type":"uint256"},{"internalType":"string","name":"displayName","type":"string"},{"internalType":"string","name":"bio","type":"string"},{"internalType":"string","name":"avatarUrl","type":"string"},{"internalType":"string","name":"location","type":"string"},{"internalType":"uint256","name":"createdAt","type":"uint256"},{"internalType":"uint256","name":"lastUpdatedAt","type":"uint256"},{"internalType":"string","name":"tosVersion","type":"string"},{"internalType":"uint256","name":"tosAcceptedAt","type":"uint256"}],"internalType":"struct ProfileNFT.Profile","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"getProfileByAddress","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"membershipTokenId","type":"uint256"},{"internalType":"string","name":"displayName","type":"string"},{"internalType":"string","name":"bio","type":"string"},{"internalType":"string","name":"avatarUrl","type":"string"},{"internalType":"string","name":"location","type":"string"},{"internalType":"uint256","name":"createdAt","type":"uint256"},{"internalType":"uint256","name":"lastUpdatedAt","type":"uint256"},{"internalType":"string","name":"tosVersion","type":"string"},{"internalType":"uint256","name":"tosAcceptedAt","type":"uint256"}],"internalType":"struct ProfileNFT.Profile","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"}],"name":"getProfileHistory","outputs":[{"components":[{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"string","name":"fieldName","type":"string"},{"internalType":"string","name":"oldValue","type":"string"},{"internalType":"string","name":"newValue","type":"string"},{"internalType":"address","name":"updatedBy","type":"address"}],"internalType":"struct ProfileNFT.ProfileUpdate[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"}],"name":"getProfileMembershipToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"hasProfile","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"displayName","type":"string"},{"internalType":"string","name":"bio","type":"string"},{"internalType":"string","name":"avatarUrl","type":"string"},{"internalType":"string","name":"location","type":"string"},{"internalType":"string","name":"tosVersion","type":"string"}],"name":"mintProfile","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"profileHistory","outputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"string","name":"fieldName","type":"string"},{"internalType":"string","name":"oldValue","type":"string"},{"internalType":"string","name":"newValue","type":"string"},{"internalType":"address","name":"updatedBy","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"profiles","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"membershipTokenId","type":"uint256"},{"internalType":"string","name":"displayName","type":"string"},{"internalType":"string","name":"bio","type":"string"},{"internalType":"string","name":"avatarUrl","type":"string"},{"internalType":"string","name":"location","type":"string"},{"internalType":"uint256","name":"createdAt","type":"uint256"},{"internalType":"uint256","name":"lastUpdatedAt","type":"uint256"},{"internalType":"string","name":"tosVersion","type":"string"},{"internalType":"uint256","name":"tosAcceptedAt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"profileId","type":"uint256"},{"internalType":"string","name":"displayName","type":"string"},{"internalType":"string","name":"bio","type":"string"},{"internalType":"string","name":"avatarUrl","type":"string"},{"internalType":"string","name":"location","type":"string"}],"name":"updateProfile","outputs":[],"stateMutability":"nonpayable","type":"function"}]');

/***/ }),

/***/ "(ssr)/./lib/blockchain/contracts/ProfileNFT.ts":
/*!************************************************!*\
  !*** ./lib/blockchain/contracts/ProfileNFT.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProfileNFTService: () => (/* binding */ ProfileNFTService)\n/* harmony export */ });\n/* harmony import */ var ethers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ethers */ \"(ssr)/./node_modules/ethers/lib.esm/contract/contract.js\");\n/* harmony import */ var _ProfileNFT_abi_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ProfileNFT.abi.json */ \"(ssr)/./lib/blockchain/contracts/ProfileNFT.abi.json\");\n/* harmony import */ var _deployments_ProfileNFT_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/deployments/ProfileNFT.json */ \"(ssr)/./deployments/ProfileNFT.json\");\n// lib/blockchain/contracts/ProfileNFT.ts\n\n\n\nclass ProfileNFTService {\n    constructor(provider, signer){\n        this.provider = provider;\n        this.contract = new ethers__WEBPACK_IMPORTED_MODULE_2__.Contract(_deployments_ProfileNFT_json__WEBPACK_IMPORTED_MODULE_1__.address, _ProfileNFT_abi_json__WEBPACK_IMPORTED_MODULE_0__, signer || provider);\n    }\n    // Create a new profile (mint NFT)\n    async createProfile(displayName, bio, avatarUrl, location, tosVersion = \"1.0\") {\n        try {\n            // Call the mintProfile function\n            const tx = await this.contract.mintProfile(displayName, bio, avatarUrl || '', location, tosVersion);\n            // Wait for transaction confirmation\n            const receipt = await tx.wait();\n            // Extract profileId from the ProfileMinted event\n            const mintEvent = receipt.logs.find((log)=>log.fragment?.name === 'ProfileMinted');\n            if (!mintEvent) {\n                throw new Error('Profile minting event not found');\n            }\n            const profileId = mintEvent.args.profileId.toString();\n            return {\n                profileId,\n                txHash: receipt.hash\n            };\n        } catch (error) {\n            // Handle specific contract errors\n            if (error.message?.includes('Must hold ImmutableType membership token')) {\n                throw new Error('You must hold an ImmutableType membership token (IT00-IT99) to create a profile');\n            }\n            if (error.message?.includes('Address already has a profile')) {\n                throw new Error('This wallet already has a profile');\n            }\n            if (error.message?.includes('Display name cannot be empty')) {\n                throw new Error('Display name is required');\n            }\n            if (error.message?.includes('Display name too long')) {\n                throw new Error('Display name must be 50 characters or less');\n            }\n            if (error.message?.includes('Bio too long')) {\n                throw new Error('Bio must be 500 characters or less');\n            }\n            throw error;\n        }\n    }\n    // Get profile by ID\n    async getProfile(profileId) {\n        try {\n            const profile = await this.contract.getProfile(profileId);\n            return {\n                id: profile.id.toString(),\n                owner: profile.owner,\n                membershipTokenId: profile.membershipTokenId.toString(),\n                displayName: profile.displayName,\n                bio: profile.bio,\n                avatarUrl: profile.avatarUrl,\n                location: profile.location,\n                createdAt: new Date(Number(profile.createdAt) * 1000).toISOString(),\n                lastUpdatedAt: new Date(Number(profile.lastUpdatedAt) * 1000).toISOString(),\n                tosVersion: profile.tosVersion,\n                tosAcceptedAt: new Date(Number(profile.tosAcceptedAt) * 1000).toISOString()\n            };\n        } catch (error) {\n            if (error.message?.includes('Profile does not exist')) {\n                return null;\n            }\n            throw error;\n        }\n    }\n    // Get profile by wallet address\n    async getProfileByAddress(address) {\n        try {\n            const profile = await this.contract.getProfileByAddress(address);\n            return {\n                id: profile.id.toString(),\n                owner: profile.owner,\n                membershipTokenId: profile.membershipTokenId.toString(),\n                displayName: profile.displayName,\n                bio: profile.bio,\n                avatarUrl: profile.avatarUrl,\n                location: profile.location,\n                createdAt: new Date(Number(profile.createdAt) * 1000).toISOString(),\n                lastUpdatedAt: new Date(Number(profile.lastUpdatedAt) * 1000).toISOString(),\n                tosVersion: profile.tosVersion,\n                tosAcceptedAt: new Date(Number(profile.tosAcceptedAt) * 1000).toISOString()\n            };\n        } catch (error) {\n            if (error.message?.includes('Address has no profile')) {\n                return null;\n            }\n            throw error;\n        }\n    }\n    // Check if address has a profile\n    async hasProfile(address) {\n        return await this.contract.hasProfile(address);\n    }\n    // Update profile\n    async updateProfile(profileId, displayName, bio, avatarUrl, location) {\n        const tx = await this.contract.updateProfile(profileId, displayName, bio, avatarUrl || '', location);\n        const receipt = await tx.wait();\n        return {\n            txHash: receipt.hash\n        };\n    }\n    // Get profile update history\n    async getProfileHistory(profileId) {\n        const history = await this.contract.getProfileHistory(profileId);\n        return history.map((update)=>({\n                timestamp: new Date(Number(update.timestamp) * 1000).toISOString(),\n                fieldName: update.fieldName,\n                oldValue: update.oldValue,\n                newValue: update.newValue,\n                updatedBy: update.updatedBy\n            }));\n    }\n    // Get the membership token ID for a profile\n    async getProfileMembershipToken(profileId) {\n        const tokenId = await this.contract.getProfileMembershipToken(profileId);\n        return tokenId.toString();\n    }\n    // Get total number of profiles\n    async getTotalProfiles() {\n        try {\n            // Since the contract doesn't expose a totalSupply or counter,\n            // we'll need to find profiles by checking which IDs exist\n            let count = 0;\n            let id = 1;\n            let consecutiveMisses = 0;\n            // Keep checking until we get 5 consecutive misses\n            while(consecutiveMisses < 5 && id <= 1000){\n                try {\n                    await this.contract.getProfile(id);\n                    count = id; // Update count to the highest found ID\n                    consecutiveMisses = 0; // Reset consecutive misses\n                } catch (error) {\n                    consecutiveMisses++;\n                }\n                id++;\n            }\n            return count;\n        } catch (error) {\n            console.error('Error getting total profiles:', error);\n            return 0;\n        }\n    }\n    // Get multiple profiles by ID range\n    async getProfileBatch(startId, limit) {\n        const profiles = [];\n        // Fetch profiles in parallel for better performance\n        const promises = [];\n        for(let i = startId; i <= startId + limit - 1; i++){\n            promises.push(this.getProfile(i.toString()));\n        }\n        const results = await Promise.all(promises);\n        // Filter out null results (non-existent profiles)\n        for (const profile of results){\n            if (profile) {\n                profiles.push(profile);\n            }\n        }\n        return profiles;\n    }\n    // Get profiles with pagination (returns profiles in reverse order - newest first)\n    async getProfilesPaginated(limit, offset = 0) {\n        const profiles = [];\n        // Simple approach: just try to fetch the first N profiles starting from ID 1\n        console.log(`Attempting to fetch up to ${limit} profiles starting from ID ${offset + 1}`);\n        let foundCount = 0;\n        let checkedCount = 0;\n        const startId = offset + 1;\n        const maxToCheck = 100; // Don't check more than 100 IDs in one request\n        for(let i = startId; i < startId + maxToCheck && foundCount < limit; i++){\n            try {\n                console.log(`Checking profile ID ${i}...`);\n                const profile = await this.getProfile(i.toString());\n                if (profile) {\n                    console.log(`Found profile ${i}:`, profile.displayName);\n                    profiles.push(profile);\n                    foundCount++;\n                }\n            } catch (error) {\n                console.log(`Profile ${i} doesn't exist`);\n            }\n            checkedCount++;\n        }\n        console.log(`Found ${foundCount} profiles after checking ${checkedCount} IDs`);\n        // Simple hasMore logic: if we found as many as requested, there might be more\n        const hasMore = foundCount === limit;\n        return {\n            profiles,\n            total: foundCount,\n            hasMore\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvYmxvY2tjaGFpbi9jb250cmFjdHMvUHJvZmlsZU5GVC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEseUNBQXlDO0FBQ1Q7QUFDa0I7QUFDUztBQXdCcEQsTUFBTUc7SUFJWEMsWUFBWUMsUUFBeUIsRUFBRUMsTUFBc0IsQ0FBRTtRQUM3RCxJQUFJLENBQUNELFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDRSxRQUFRLEdBQUcsSUFBSVAsNENBQWUsQ0FDakNFLGlFQUFzQixFQUN0QkQsaURBQWFBLEVBQ2JLLFVBQVVEO0lBRWQ7SUFFQSxrQ0FBa0M7SUFDbEMsTUFBTUssY0FDSkMsV0FBbUIsRUFDbkJDLEdBQVcsRUFDWEMsU0FBaUIsRUFDakJDLFFBQWdCLEVBQ2hCQyxhQUFxQixLQUFLLEVBQ3NCO1FBQ2hELElBQUk7WUFDRixnQ0FBZ0M7WUFDaEMsTUFBTUMsS0FBSyxNQUFNLElBQUksQ0FBQ1QsUUFBUSxDQUFDVSxXQUFXLENBQ3hDTixhQUNBQyxLQUNBQyxhQUFhLElBQ2JDLFVBQ0FDO1lBR0Ysb0NBQW9DO1lBQ3BDLE1BQU1HLFVBQVUsTUFBTUYsR0FBR0csSUFBSTtZQUU3QixpREFBaUQ7WUFDakQsTUFBTUMsWUFBWUYsUUFBUUcsSUFBSSxDQUFDQyxJQUFJLENBQ2pDLENBQUNDLE1BQWFBLElBQUlDLFFBQVEsRUFBRUMsU0FBUztZQUd2QyxJQUFJLENBQUNMLFdBQVc7Z0JBQ2QsTUFBTSxJQUFJTSxNQUFNO1lBQ2xCO1lBRUEsTUFBTUMsWUFBWVAsVUFBVVEsSUFBSSxDQUFDRCxTQUFTLENBQUNFLFFBQVE7WUFFbkQsT0FBTztnQkFDTEY7Z0JBQ0FHLFFBQVFaLFFBQVFhLElBQUk7WUFDdEI7UUFDRixFQUFFLE9BQU9DLE9BQVk7WUFDbkIsa0NBQWtDO1lBQ2xDLElBQUlBLE1BQU1DLE9BQU8sRUFBRUMsU0FBUyw2Q0FBNkM7Z0JBQ3ZFLE1BQU0sSUFBSVIsTUFBTTtZQUNsQjtZQUNBLElBQUlNLE1BQU1DLE9BQU8sRUFBRUMs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VUFBVSxDQUFDa0MsRUFBRXhDLFFBQVE7Z0JBQ2hELElBQUlPLFNBQVM7b0JBQ1gyQixRQUFReEMsR0FBRyxDQUFDLENBQUMsY0FBYyxFQUFFOEMsRUFBRSxDQUFDLENBQUMsRUFBRWpDLFFBQVF6QixXQUFXO29CQUN0RHdELFNBQVNHLElBQUksQ0FBQ2xDO29CQUNkd0M7Z0JBQ0Y7WUFDRixFQUFFLE9BQU81QyxPQUFPO2dCQUNkK0IsUUFBUXhDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRThDLEVBQUUsY0FBYyxDQUFDO1lBQzFDO1lBQ0FRO1FBQ0Y7UUFFQWQsUUFBUXhDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRXFELFdBQVcseUJBQXlCLEVBQUVDLGFBQWEsSUFBSSxDQUFDO1FBRTdFLDhFQUE4RTtRQUM5RSxNQUFNRSxVQUFVSCxlQUFlVjtRQUUvQixPQUFPO1lBQ0xDO1lBQ0FhLE9BQU9KO1lBQ1BHO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZGFuaWVscGV0ZXJzL0RvY3VtZW50cy9JbW11dGFibGUzL2FwcC9saWIvYmxvY2tjaGFpbi9jb250cmFjdHMvUHJvZmlsZU5GVC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvYmxvY2tjaGFpbi9jb250cmFjdHMvUHJvZmlsZU5GVC50c1xuaW1wb3J0IHsgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCBQcm9maWxlTkZUQUJJIGZyb20gJy4vUHJvZmlsZU5GVC5hYmkuanNvbic7XG5pbXBvcnQgZGVwbG95bWVudEluZm8gZnJvbSAnQC9kZXBsb3ltZW50cy9Qcm9maWxlTkZULmpzb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2ZpbGVEYXRhIHtcbiAgaWQ6IHN0cmluZztcbiAgb3duZXI6IHN0cmluZztcbiAgbWVtYmVyc2hpcFRva2VuSWQ6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgYmlvOiBzdHJpbmc7XG4gIGF2YXRhclVybDogc3RyaW5nO1xuICBsb2NhdGlvbjogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgbGFzdFVwZGF0ZWRBdDogc3RyaW5nO1xuICB0b3NWZXJzaW9uOiBzdHJpbmc7XG4gIHRvc0FjY2VwdGVkQXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9maWxlVXBkYXRlIHtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIGZpZWxkTmFtZTogc3RyaW5nO1xuICBvbGRWYWx1ZTogc3RyaW5nO1xuICBuZXdWYWx1ZTogc3RyaW5nO1xuICB1cGRhdGVkQnk6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFByb2ZpbGVORlRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjb250cmFjdDogZXRoZXJzLkNvbnRyYWN0O1xuICBwcml2YXRlIHByb3ZpZGVyOiBldGhlcnMuUHJvdmlkZXI7XG4gIFxuICBjb25zdHJ1Y3Rvcihwcm92aWRlcjogZXRoZXJzLlByb3ZpZGVyLCBzaWduZXI/OiBldGhlcnMuU2lnbmVyKSB7XG4gICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICAgIHRoaXMuY29udHJhY3QgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KFxuICAgICAgZGVwbG95bWVudEluZm8uYWRkcmVzcyxcbiAgICAgIFByb2ZpbGVORlRBQkksXG4gICAgICBzaWduZXIgfHwgcHJvdmlkZXJcbiAgICApO1xuICB9XG4gIFxuICAvLyBDcmVhdGUgYSBuZXcgcHJvZmlsZSAobWludCBORlQpXG4gIGFzeW5jIGNyZWF0ZVByb2ZpbGUoXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZyxcbiAgICBiaW86IHN0cmluZyxcbiAgICBhdmF0YXJVcmw6IHN0cmluZyxcbiAgICBsb2NhdGlvbjogc3RyaW5nLFxuICAgIHRvc1ZlcnNpb246IHN0cmluZyA9IFwiMS4wXCJcbiAgKTogUHJvbWlzZTx7IHByb2ZpbGVJZDogc3RyaW5nOyB0eEhhc2g6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGwgdGhlIG1pbnRQcm9maWxlIGZ1bmN0aW9uXG4gICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMuY29udHJhY3QubWludFByb2ZpbGUoXG4gICAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgICBiaW8sXG4gICAgICAgIGF2YXRhclVybCB8fCAnJywgLy8gRGVmYXVsdCB0byBlbXB0eSBzdHJpbmcgaWYgbm8gYXZhdGFyXG4gICAgICAgIGxvY2F0aW9uLFxuICAgICAgICB0b3NWZXJzaW9uXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBXYWl0IGZvciB0cmFuc2FjdGlvbiBjb25maXJtYXRpb25cbiAgICAgIGNvbnN0IHJlY2VpcHQgPSBhd2FpdCB0eC53YWl0KCk7XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgcHJvZmlsZUlkIGZyb20gdGhlIFByb2ZpbGVNaW50ZWQgZXZlbnRcbiAgICAgIGNvbnN0IG1pbnRFdmVudCA9IHJlY2VpcHQubG9ncy5maW5kKFxuICAgICAgICAobG9nOiBhbnkpID0+IGxvZy5mcmFnbWVudD8ubmFtZSA9PT0gJ1Byb2ZpbGVNaW50ZWQnXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoIW1pbnRFdmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2ZpbGUgbWludGluZyBldmVudCBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvZmlsZUlkID0gbWludEV2ZW50LmFyZ3MucHJvZmlsZUlkLnRvU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByb2ZpbGVJZCxcbiAgICAgICAgdHhIYXNoOiByZWNlaXB0Lmhhc2hcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIGNvbnRyYWN0IGVycm9yc1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdNdXN0IGhvbGQgSW1tdXRhYmxlVHlwZSBtZW1iZXJzaGlwIHRva2VuJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBob2xkIGFuIEltbXV0YWJsZVR5cGUgbWVtYmVyc2hpcCB0b2tlbiAoSVQwMC1JVDk5KSB0byBjcmVhdGUgYSBwcm9maWxlJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0FkZHJlc3MgYWxyZWFkeSBoYXMgYSBwcm9maWxlJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIHdhbGxldCBhbHJlYWR5IGhhcyBhIHByb2ZpbGUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnRGlzcGxheSBuYW1lIGNhbm5vdCBiZSBlbXB0eScpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRGlzcGxheSBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0Rpc3BsYXkgbmFtZSB0b28gbG9uZycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRGlzcGxheSBuYW1lIG11c3QgYmUgNTAgY2hhcmFjdGVycyBvciBsZXNzJyk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ0JpbyB0b28gbG9uZycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQmlvIG11c3QgYmUgNTAwIGNoYXJhY3RlcnMgb3IgbGVzcycpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEdldCBwcm9maWxlIGJ5IElEXG4gIGFzeW5jIGdldFByb2ZpbGUocHJvZmlsZUlkOiBzdHJpbmcpOiBQcm9taXNlPFByb2ZpbGVEYXRhIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgdGhpcy5jb250cmFjdC5nZXRQcm9maWxlKHByb2ZpbGVJZCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwcm9maWxlLmlkLnRvU3RyaW5nKCksXG4gICAgICAgIG93bmVyOiBwcm9maWxlLm93bmVyLFxuICAgICAgICBtZW1iZXJzaGlwVG9rZW5JZDogcHJvZmlsZS5tZW1iZXJzaGlwVG9rZW5JZC50b1N0cmluZygpLFxuICAgICAgICBkaXNwbGF5TmFtZTogcHJvZmlsZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgYmlvOiBwcm9maWxlLmJpbyxcbiAgICAgICAgYXZhdGFyVXJsOiBwcm9maWxlLmF2YXRhclVybCxcbiAgICAgICAgbG9jYXRpb246IHByb2ZpbGUubG9jYXRpb24sXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoTnVtYmVyKHByb2ZpbGUuY3JlYXRlZEF0KSAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGxhc3RVcGRhdGVkQXQ6IG5ldyBEYXRlKE51bWJlcihwcm9maWxlLmxhc3RVcGRhdGVkQXQpICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdG9zVmVyc2lvbjogcHJvZmlsZS50b3NWZXJzaW9uLFxuICAgICAgICB0b3NBY2NlcHRlZEF0OiBuZXcgRGF0ZShOdW1iZXIocHJvZmlsZS50b3NBY2NlcHRlZEF0KSAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnUHJvZmlsZSBkb2VzIG5vdCBleGlzdCcpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICAvLyBHZXQgcHJvZmlsZSBieSB3YWxsZXQgYWRkcmVzc1xuICBhc3luYyBnZXRQcm9maWxlQnlBZGRyZXNzKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8UHJvZmlsZURhdGEgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCB0aGlzLmNvbnRyYWN0LmdldFByb2ZpbGVCeUFkZHJlc3MoYWRkcmVzcyk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwcm9maWxlLmlkLnRvU3RyaW5nKCksXG4gICAgICAgIG93bmVyOiBwcm9maWxlLm93bmVyLFxuICAgICAgICBtZW1iZXJzaGlwVG9rZW5JZDogcHJvZmlsZS5tZW1iZXJzaGlwVG9rZW5JZC50b1N0cmluZygpLFxuICAgICAgICBkaXNwbGF5TmFtZTogcHJvZmlsZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgYmlvOiBwcm9maWxlLmJpbyxcbiAgICAgICAgYXZhdGFyVXJsOiBwcm9maWxlLmF2YXRhclVybCxcbiAgICAgICAgbG9jYXRpb246IHByb2ZpbGUubG9jYXRpb24sXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoTnVtYmVyKHByb2ZpbGUuY3JlYXRlZEF0KSAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGxhc3RVcGRhdGVkQXQ6IG5ldyBEYXRlKE51bWJlcihwcm9maWxlLmxhc3RVcGRhdGVkQXQpICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdG9zVmVyc2lvbjogcHJvZmlsZS50b3NWZXJzaW9uLFxuICAgICAgICB0b3NBY2NlcHRlZEF0OiBuZXcgRGF0ZShOdW1iZXIocHJvZmlsZS50b3NBY2NlcHRlZEF0KSAqIDEwMDApLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnQWRkcmVzcyBoYXMgbm8gcHJvZmlsZScpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICAvLyBDaGVjayBpZiBhZGRyZXNzIGhhcyBhIHByb2ZpbGVcbiAgYXN5bmMgaGFzUHJvZmlsZShhZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250cmFjdC5oYXNQcm9maWxlKGFkZHJlc3MpO1xuICB9XG4gIFxuICAvLyBVcGRhdGUgcHJvZmlsZVxuICBhc3luYyB1cGRhdGVQcm9maWxlKFxuICAgIHByb2ZpbGVJZDogc3RyaW5nLFxuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmcsXG4gICAgYmlvOiBzdHJpbmcsXG4gICAgYXZhdGFyVXJsOiBzdHJpbmcsXG4gICAgbG9jYXRpb246IHN0cmluZ1xuICApOiBQcm9taXNlPHsgdHhIYXNoOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5jb250cmFjdC51cGRhdGVQcm9maWxlKFxuICAgICAgcHJvZmlsZUlkLFxuICAgICAgZGlzcGxheU5hbWUsXG4gICAgICBiaW8sXG4gICAgICBhdmF0YXJVcmwgfHwgJycsXG4gICAgICBsb2NhdGlvblxuICAgICk7XG4gICAgXG4gICAgY29uc3QgcmVjZWlwdCA9IGF3YWl0IHR4LndhaXQoKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdHhIYXNoOiByZWNlaXB0Lmhhc2hcbiAgICB9O1xuICB9XG4gIFxuICAvLyBHZXQgcHJvZmlsZSB1cGRhdGUgaGlzdG9yeVxuICBhc3luYyBnZXRQcm9maWxlSGlzdG9yeShwcm9maWxlSWQ6IHN0cmluZyk6IFByb21pc2U8UHJvZmlsZVVwZGF0ZVtdPiB7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHRoaXMuY29udHJhY3QuZ2V0UHJvZmlsZUhpc3RvcnkocHJvZmlsZUlkKTtcbiAgICBcbiAgICByZXR1cm4gaGlzdG9yeS5tYXAoKHVwZGF0ZTogYW55KSA9PiAoe1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShOdW1iZXIodXBkYXRlLnRpbWVzdGFtcCkgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgZmllbGROYW1lOiB1cGRhdGUuZmllbGROYW1lLFxuICAgICAgb2xkVmFsdWU6IHVwZGF0ZS5vbGRWYWx1ZSxcbiAgICAgIG5ld1ZhbHVlOiB1cGRhdGUubmV3VmFsdWUsXG4gICAgICB1cGRhdGVkQnk6IHVwZGF0ZS51cGRhdGVkQnlcbiAgICB9KSk7XG4gIH1cbiAgXG4gIC8vIEdldCB0aGUgbWVtYmVyc2hpcCB0b2tlbiBJRCBmb3IgYSBwcm9maWxlXG4gIGFzeW5jIGdldFByb2ZpbGVNZW1iZXJzaGlwVG9rZW4ocHJvZmlsZUlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRva2VuSWQgPSBhd2FpdCB0aGlzLmNvbnRyYWN0LmdldFByb2ZpbGVNZW1iZXJzaGlwVG9rZW4ocHJvZmlsZUlkKTtcbiAgICByZXR1cm4gdG9rZW5JZC50b1N0cmluZygpO1xuICB9XG5cbiAgLy8gR2V0IHRvdGFsIG51bWJlciBvZiBwcm9maWxlc1xuICBhc3luYyBnZXRUb3RhbFByb2ZpbGVzKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbmNlIHRoZSBjb250cmFjdCBkb2Vzbid0IGV4cG9zZSBhIHRvdGFsU3VwcGx5IG9yIGNvdW50ZXIsXG4gICAgICAvLyB3ZSdsbCBuZWVkIHRvIGZpbmQgcHJvZmlsZXMgYnkgY2hlY2tpbmcgd2hpY2ggSURzIGV4aXN0XG4gICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgbGV0IGlkID0gMTtcbiAgICAgIGxldCBjb25zZWN1dGl2ZU1pc3NlcyA9IDA7XG4gICAgICBcbiAgICAgIC8vIEtlZXAgY2hlY2tpbmcgdW50aWwgd2UgZ2V0IDUgY29uc2VjdXRpdmUgbWlzc2VzXG4gICAgICB3aGlsZSAoY29uc2VjdXRpdmVNaXNzZXMgPCA1ICYmIGlkIDw9IDEwMDApIHsgLy8gQ2FwIGF0IDEwMDAgZm9yIHNhZmV0eVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY29udHJhY3QuZ2V0UHJvZmlsZShpZCk7XG4gICAgICAgICAgY291bnQgPSBpZDsgLy8gVXBkYXRlIGNvdW50IHRvIHRoZSBoaWdoZXN0IGZvdW5kIElEXG4gICAgICAgICAgY29uc2VjdXRpdmVNaXNzZXMgPSAwOyAvLyBSZXNldCBjb25zZWN1dGl2ZSBtaXNzZXNcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zZWN1dGl2ZU1pc3NlcysrO1xuICAgICAgICB9XG4gICAgICAgIGlkKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBjb3VudDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB0b3RhbCBwcm9maWxlczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgbXVsdGlwbGUgcHJvZmlsZXMgYnkgSUQgcmFuZ2VcbiAgYXN5bmMgZ2V0UHJvZmlsZUJhdGNoKHN0YXJ0SWQ6IG51bWJlciwgbGltaXQ6IG51bWJlcik6IFByb21pc2U8UHJvZmlsZURhdGFbXT4ge1xuICAgIGNvbnN0IHByb2ZpbGVzOiBQcm9maWxlRGF0YVtdID0gW107XG4gICAgXG4gICAgLy8gRmV0Y2ggcHJvZmlsZXMgaW4gcGFyYWxsZWwgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IHByb21pc2VzOiBQcm9taXNlPFByb2ZpbGVEYXRhIHwgbnVsbD5bXSA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSBzdGFydElkOyBpIDw9IHN0YXJ0SWQgKyBsaW1pdCAtIDE7IGkrKykge1xuICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmdldFByb2ZpbGUoaS50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCBudWxsIHJlc3VsdHMgKG5vbi1leGlzdGVudCBwcm9maWxlcylcbiAgICBmb3IgKGNvbnN0IHByb2ZpbGUgb2YgcmVzdWx0cykge1xuICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgcHJvZmlsZXMucHVzaChwcm9maWxlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHByb2ZpbGVzO1xuICB9XG5cbiAgLy8gR2V0IHByb2ZpbGVzIHdpdGggcGFnaW5hdGlvbiAocmV0dXJucyBwcm9maWxlcyBpbiByZXZlcnNlIG9yZGVyIC0gbmV3ZXN0IGZpcnN0KVxuICBhc3luYyBnZXRQcm9maWxlc1BhZ2luYXRlZChsaW1pdDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlciA9IDApOiBQcm9taXNlPHtcbiAgICBwcm9maWxlczogUHJvZmlsZURhdGFbXTtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIGhhc01vcmU6IGJvb2xlYW47XG4gIH0+IHtcbiAgICBjb25zdCBwcm9maWxlczogUHJvZmlsZURhdGFbXSA9IFtdO1xuICAgIFxuICAgIC8vIFNpbXBsZSBhcHByb2FjaDoganVzdCB0cnkgdG8gZmV0Y2ggdGhlIGZpcnN0IE4gcHJvZmlsZXMgc3RhcnRpbmcgZnJvbSBJRCAxXG4gICAgY29uc29sZS5sb2coYEF0dGVtcHRpbmcgdG8gZmV0Y2ggdXAgdG8gJHtsaW1pdH0gcHJvZmlsZXMgc3RhcnRpbmcgZnJvbSBJRCAke29mZnNldCArIDF9YCk7XG4gICAgXG4gICAgbGV0IGZvdW5kQ291bnQgPSAwO1xuICAgIGxldCBjaGVja2VkQ291bnQgPSAwO1xuICAgIGNvbnN0IHN0YXJ0SWQgPSBvZmZzZXQgKyAxO1xuICAgIGNvbnN0IG1heFRvQ2hlY2sgPSAxMDA7IC8vIERvbid0IGNoZWNrIG1vcmUgdGhhbiAxMDAgSURzIGluIG9uZSByZXF1ZXN0XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SWQ7IGkgPCBzdGFydElkICsgbWF4VG9DaGVjayAmJiBmb3VuZENvdW50IDwgbGltaXQ7IGkrKykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYENoZWNraW5nIHByb2ZpbGUgSUQgJHtpfS4uLmApO1xuICAgICAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgdGhpcy5nZXRQcm9maWxlKGkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIHByb2ZpbGUgJHtpfTpgLCBwcm9maWxlLmRpc3BsYXlOYW1lKTtcbiAgICAgICAgICBwcm9maWxlcy5wdXNoKHByb2ZpbGUpO1xuICAgICAgICAgIGZvdW5kQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFByb2ZpbGUgJHtpfSBkb2Vzbid0IGV4aXN0YCk7XG4gICAgICB9XG4gICAgICBjaGVja2VkQ291bnQrKztcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7Zm91bmRDb3VudH0gcHJvZmlsZXMgYWZ0ZXIgY2hlY2tpbmcgJHtjaGVja2VkQ291bnR9IElEc2ApO1xuICAgIFxuICAgIC8vIFNpbXBsZSBoYXNNb3JlIGxvZ2ljOiBpZiB3ZSBmb3VuZCBhcyBtYW55IGFzIHJlcXVlc3RlZCwgdGhlcmUgbWlnaHQgYmUgbW9yZVxuICAgIGNvbnN0IGhhc01vcmUgPSBmb3VuZENvdW50ID09PSBsaW1pdDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZXMsXG4gICAgICB0b3RhbDogZm91bmRDb3VudCwgLy8gRm9yIG5vdywganVzdCByZXR1cm4gd2hhdCB3ZSBmb3VuZFxuICAgICAgaGFzTW9yZVxuICAgIH07XG4gIH1cbn0iXSwibmFtZXMiOlsiZXRoZXJzIiwiUHJvZmlsZU5GVEFCSSIsImRlcGxveW1lbnRJbmZvIiwiUHJvZmlsZU5GVFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVyIiwic2lnbmVyIiwiY29udHJhY3QiLCJDb250cmFjdCIsImFkZHJlc3MiLCJjcmVhdGVQcm9maWxlIiwiZGlzcGxheU5hbWUiLCJiaW8iLCJhdmF0YXJVcmwiLCJsb2NhdGlvbiIsInRvc1ZlcnNpb24iLCJ0eCIsIm1pbnRQcm9maWxlIiwicmVjZWlwdCIsIndhaXQiLCJtaW50RXZlbnQiLCJsb2dzIiwiZmluZCIsImxvZyIsImZyYWdtZW50IiwibmFtZSIsIkVycm9yIiwicHJvZmlsZUlkIiwiYXJncyIsInRvU3RyaW5nIiwidHhIYXNoIiwiaGFzaCIsImVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZ2V0UHJvZmlsZSIsInByb2ZpbGUiLCJpZCIsIm93bmVyIiwibWVtYmVyc2hpcFRva2VuSWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwiTnVtYmVyIiwidG9JU09TdHJpbmciLCJsYXN0VXBkYXRlZEF0IiwidG9zQWNjZXB0ZWRBdCIsImdldFByb2ZpbGVCeUFkZHJlc3MiLCJoYXNQcm9maWxlIiwidXBkYXRlUHJvZmlsZSIsImdldFByb2ZpbGVIaXN0b3J5IiwiaGlzdG9yeSIsIm1hcCIsInVwZGF0ZSIsInRpbWVzdGFtcCIsImZpZWxkTmFtZSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJ1cGRhdGVkQnkiLCJnZXRQcm9maWxlTWVtYmVyc2hpcFRva2VuIiwidG9rZW5JZCIsImdldFRvdGFsUHJvZmlsZXMiLCJjb3VudCIsImNvbnNlY3V0aXZlTWlzc2VzIiwiY29uc29sZSIsImdldFByb2ZpbGVCYXRjaCIsInN0YXJ0SWQiLCJsaW1pdCIsInByb2ZpbGVzIiwicHJvbWlzZXMiLCJpIiwicHVzaCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwiZ2V0UHJvZmlsZXNQYWdpbmF0ZWQiLCJvZmZzZXQiLCJmb3VuZENvdW50IiwiY2hlY2tlZENvdW50IiwibWF4VG9DaGVjayIsImhhc01vcmUiLCJ0b3RhbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./lib/blockchain/contracts/ProfileNFT.ts\n");

/***/ })

};
;